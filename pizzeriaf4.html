<!doctype html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PizzerÃ­a MatemÃ¡tica - Nivel Medio</title>
<script src="https://cdn.tailwindcss.com/3.4.17"></script>
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{font-family:'Fredoka',cursive}
.pizza-slice{cursor:pointer;transition:.2s}
.pizza-slice:hover{filter:brightness(1.1)}
</style>
</head>

<body class="min-h-screen bg-gradient-to-br from-blue-100 via-sky-50 to-indigo-100 p-4 relative">

<button onclick="window.location.href='index.html'" 
class="absolute top-4 left-4 bg-white hover:bg-gray-100 text-blue-700 font-bold px-4 py-2 rounded-xl shadow-lg">
ğŸ  MenÃº
</button>

<div class="max-w-6xl mx-auto mt-12">

<h1 class="text-5xl font-bold text-center text-blue-600 mb-4">
ğŸ• Â¡PizzerÃ­a MatemÃ¡tica!
</h1>

<p class="text-center text-blue-800 text-xl mb-6">
Nivel: Chef Intermedio
</p>

<div class="flex flex-col lg:flex-row gap-6">

<div class="lg:w-1/3 bg-blue-100 rounded-3xl p-4 shadow-xl">
<h2 class="text-xl font-bold mb-4">ğŸ“‹ Pedido</h2>
<div id="order"></div>
<button onclick="checkPizza()" 
class="mt-4 w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-full">
Verificar Pizza
</button>
</div>

<div class="lg:w-2/3 flex flex-col items-center">
<svg id="pizza" viewBox="0 0 300 300" class="w-80 h-80"></svg>
<button onclick="clearPizza()" 
class="mt-4 bg-gray-400 hover:bg-gray-500 text-white px-6 py-2 rounded-full">
Limpiar
</button>
</div>

</div>

<div id="result" class="text-center text-2xl font-bold mt-6"></div>

</div>

<script>

let sliceCount = 2;
let pizzaSlices = [];
let currentIngredient = "";
let orderSlices = 1;

const fractionOptions = [2,4,8];

const ingredients = {
  pepperoni:{emoji:"ğŸ”´",color:"#dc2626"},
  cheese:{emoji:"ğŸ§€",color:"#fcd34d"},
  mushroom:{emoji:"ğŸ„",color:"#92400e"},
  corn:{emoji:"ğŸŒ½",color:"#fbbf24"}
};

function generateOrder(){

  sliceCount = fractionOptions[Math.floor(Math.random()*fractionOptions.length)];
  pizzaSlices = new Array(sliceCount).fill(null);

  const keys = Object.keys(ingredients);
  currentIngredient = keys[Math.floor(Math.random()*keys.length)];
  orderSlices = Math.floor(Math.random()*sliceCount)+1;

  document.getElementById("order").innerHTML = `
  <div class="flex items-center gap-3 text-lg">
    <span class="text-3xl">${ingredients[currentIngredient].emoji}</span>
    <span>Quiero <b>${orderSlices}/${sliceCount}</b> de ${currentIngredient}</span>
  </div>`;

  renderPizza();
}

function renderPizza(){
  const svg = document.getElementById("pizza");
  const cx=150,cy=150,r=120;
  let html=`<circle cx="${cx}" cy="${cy}" r="${r}" fill="#f39c12" stroke="#c9a227" stroke-width="8"/>`;
  const angleStep=360/sliceCount;

  for(let i=0;i<sliceCount;i++){
    const start=(i*angleStep-90)*Math.PI/180;
    const end=((i+1)*angleStep-90)*Math.PI/180;
    const x1=cx+r*Math.cos(start);
    const y1=cy+r*Math.sin(start);
    const x2=cx+r*Math.cos(end);
    const y2=cy+r*Math.sin(end);

    const fill=pizzaSlices[i]?ingredients[pizzaSlices[i]].color+"88":"transparent";

    html+=`
    <path d="M ${cx} ${cy} L ${x1} ${y1} A ${r} ${r} 0 0 1 ${x2} ${y2} Z"
    fill="${fill}"
    stroke="#2563eb"
    stroke-width="2"
    class="pizza-slice"
    onclick="toggleSlice(${i})"/>`;

    if(pizzaSlices[i]){
      const mid=((i+.5)*angleStep-90)*Math.PI/180;
      const tx=cx+(r-40)*Math.cos(mid);
      const ty=cy+(r-40)*Math.sin(mid);
      html+=`<text x="${tx}" y="${ty}" text-anchor="middle" dominant-baseline="middle" font-size="20">${ingredients[pizzaSlices[i]].emoji}</text>`;
    }
  }
  svg.innerHTML=html;
}

function toggleSlice(i){
  pizzaSlices[i]=pizzaSlices[i]===currentIngredient?null:currentIngredient;
  renderPizza();
}

function clearPizza(){
  pizzaSlices.fill(null);
  renderPizza();
}

function checkPizza(){
  const count=pizzaSlices.filter(x=>x===currentIngredient).length;
  const result=document.getElementById("result");

  if(count===orderSlices){
    result.innerHTML="ğŸ‰ Â¡Correcto!";
    setTimeout(()=>{result.innerHTML="";generateOrder();},2000);
  }else{
    result.innerHTML="ğŸ˜… Revisa la fracciÃ³n.";
  }
}

generateOrder();

</script>

</body>
</html>